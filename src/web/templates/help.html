{% extends "base.html" %}

{% block title %}Help & Documentation - Huntable CTI Scraper{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Header -->
    <div class="text-center mb-8">
        <h1 class="text-4xl font-bold text-gray-900 mb-4">üõ°Ô∏è Help & Documentation</h1>
        <p class="text-xl text-gray-600">Comprehensive guide to Huntable CTI Scraper features and functionality</p>
    </div>

    <!-- Help Sections -->
    <div class="space-y-6">
        
        <!-- Content Filtering & Hunt Scoring Section -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200">
            <div class="p-6">
                <button onclick="toggleSection('filtering')" class="w-full text-left flex items-center justify-between">
                    <h2 class="text-2xl font-bold text-gray-900 flex items-center">
                        <span class="mr-3">üéØ</span>
                        Content Filtering & Hunt Scoring System
                    </h2>
                    <svg id="filtering-icon" class="w-6 h-6 text-gray-500 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                </button>
                
                <div id="filtering-content" class="mt-6 hidden">
                    <div class="prose max-w-none">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Enhanced ML-Based Content Filtering</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                                <h4 class="font-semibold text-blue-800">üéØ Hunt Scoring Integration</h4>
                                <ul class="text-sm text-blue-700 space-y-1 mt-2">
                                    <li>‚Ä¢ 66 perfect discriminators from threat hunting analysis</li>
                                    <li>‚Ä¢ 64 LOLBAS executables for comprehensive coverage</li>
                                    <li>‚Ä¢ Cross-platform patterns (Windows, macOS, Linux)</li>
                                    <li>‚Ä¢ Intelligence indicators (APT groups, campaigns, TTPs)</li>
                                </ul>
                            </div>
                            <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                                <h4 class="font-semibold text-green-800">ü§ñ ML Classification</h4>
                                <ul class="text-sm text-green-700 space-y-1 mt-2">
                                    <li>‚Ä¢ Confidence scoring with hunt score integration</li>
                                    <li>‚Ä¢ Pattern-based fallback with enhanced accuracy</li>
                                    <li>‚Ä¢ Chunk-based analysis preserving context</li>
                                    <li>‚Ä¢ 20-80% cost reduction while maintaining quality</li>
                                </ul>
                            </div>
                        </div>

                        <h4 class="font-semibold text-gray-800 mb-3">How It Works</h4>
                        <div class="bg-gray-50 rounded-lg p-4 mb-4">
                            <div class="space-y-3 text-sm">
                                <div class="flex items-start">
                                    <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold mr-3 mt-0.5">1</span>
                                    <div>
                                        <strong>Content Analysis:</strong> Articles are chunked and analyzed for threat hunting keywords
                                    </div>
                                </div>
                                <div class="flex items-start">
                                    <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold mr-3 mt-0.5">2</span>
                                    <div>
                                        <strong>Hunt Scoring:</strong> Each chunk receives a threat hunting score (0-100) based on technical depth
                                    </div>
                                </div>
                                <div class="flex items-start">
                                    <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold mr-3 mt-0.5">3</span>
                                    <div>
                                        <strong>ML Classification:</strong> Machine learning model predicts huntability with confidence scoring
                                    </div>
                                </div>
                                <div class="flex items-start">
                                    <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold mr-3 mt-0.5">4</span>
                                    <div>
                                        <strong>Cost Optimization:</strong> Only high-value chunks are sent to GPT-4o for analysis
                                    </div>
                                </div>
                            </div>
                        </div>

                        <h4 class="font-semibold text-gray-800 mb-3">Key Features</h4>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Feature</th>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Description</th>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Benefit</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-medium text-gray-900">Perfect Discriminator Protection</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Chunks containing high-value threat hunting keywords are never filtered</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Zero loss of critical content</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-medium text-gray-900">Hunt Score Integration</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">ML confidence enhanced by threat hunting scores</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Improved classification accuracy</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-medium text-gray-900">Cross-Platform Coverage</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Windows, macOS, and Linux threat patterns</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Comprehensive threat detection</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-medium text-gray-900">Obfuscation Detection</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Advanced regex patterns for cmd.exe obfuscation</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Detects sophisticated attack techniques</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="mt-6 p-4 bg-green-50 border border-green-200 rounded-lg">
                            <h4 class="font-semibold text-green-800 mb-2">‚úÖ System Benefits</h4>
                            <ul class="text-sm text-green-700 space-y-1">
                                <li>‚Ä¢ <strong>Cost Reduction:</strong> 20-80% reduction in GPT-4o API costs</li>
                                <li>‚Ä¢ <strong>Quality Preservation:</strong> High-value threat hunting content never filtered</li>
                                <li>‚Ä¢ <strong>Enhanced Accuracy:</strong> Hunt scores improve ML classification confidence</li>
                                <li>‚Ä¢ <strong>Unified Approach:</strong> Single source of truth for threat hunting keywords</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Software Testing Section -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200">
            <div class="p-6">
                <button onclick="toggleSection('testing')" class="w-full text-left flex items-center justify-between">
                    <h2 class="text-2xl font-bold text-gray-900 flex items-center">
                        <span class="mr-3">üß™</span>
                        Software Testing & Quality Assurance
                    </h2>
                    <svg id="testing-icon" class="w-6 h-6 text-gray-500 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                </button>
                
                <div id="testing-content" class="mt-6 hidden">
                    <div class="prose max-w-none">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Test Suite Overview</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                            <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                                <h4 class="font-semibold text-green-800">‚úÖ Unit Tests</h4>
                                <p class="text-sm text-green-700">442 active tests across 21 files</p>
                                <p class="text-xs text-green-600">Core functionality testing with mocked dependencies</p>
                            </div>
                            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                                <h4 class="font-semibold text-blue-800">üé≠ UI Tests</h4>
                                <p class="text-sm text-blue-700">61 tests across 5 files</p>
                                <p class="text-xs text-blue-600">User interface testing with Playwright</p>
                            </div>
                            <div class="bg-purple-50 border border-purple-200 rounded-lg p-4">
                                <h4 class="font-semibold text-purple-800">üîó Integration Tests</h4>
                                <p class="text-sm text-purple-700">46 tests across 4 files</p>
                                <p class="text-xs text-purple-600">Cross-component testing with real dependencies</p>
                            </div>
                            <div class="bg-orange-50 border border-orange-200 rounded-lg p-4">
                                <h4 class="font-semibold text-orange-800">ü§ñ AI Assistant Tests</h4>
                                <p class="text-sm text-orange-700">45 tests across 3 files</p>
                                <p class="text-xs text-orange-600">AI model integration and UI testing</p>
                            </div>
                        </div>

                        <h4 class="font-semibold text-gray-800 mb-3">Quick Test Commands</h4>
                        <div class="bg-gray-50 rounded-lg p-4 mb-4">
                            <div class="space-y-2 font-mono text-sm">
                                <div><span class="text-blue-600"># Health check</span><br>python run_tests.py --smoke</div>
                                <div><span class="text-blue-600"># Full suite with coverage</span><br>python run_tests.py --all --coverage</div>
                                <div><span class="text-blue-600"># Docker-based testing</span><br>python run_tests.py --docker --integration</div>
                                <div><span class="text-blue-600"># AI Assistant tests</span><br>python run_tests.py --ai</div>
                                <div><span class="text-blue-600"># AI UI tests with coverage</span><br>python run_tests.py --ai-ui --coverage</div>
                                <div><span class="text-blue-600"># AI tests without real API calls</span><br>python run_tests.py --ai-skip-real-api</div>
                                <div><span class="text-blue-600"># Install dependencies</span><br>python run_tests.py --install</div>
                            </div>
                        </div>

                        <h4 class="font-semibold text-gray-800 mb-3">Test Categories</h4>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Category</th>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Files</th>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Tests</th>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Duration</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-medium text-gray-900">Unit Tests</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">21</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">442</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">~1m</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-medium text-gray-900">UI Tests</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">5</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">61</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">~5m</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-medium text-gray-900">Integration Tests</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">4</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">46</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">~3m</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-medium text-gray-900">API Tests</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">1</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">15</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">~2m</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-medium text-gray-900">E2E Tests</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">1</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">13</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">~8m</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-medium text-gray-900">AI Assistant Tests</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">3</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">45</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">~3m</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                            <h4 class="font-semibold text-yellow-800 mb-2">‚ö†Ô∏è Known Issues</h4>
                            <ul class="text-sm text-yellow-700 space-y-1">
                                <li>‚Ä¢ 202 tests skipped due to async mock configuration issues</li>
                                <li>‚Ä¢ 1 HTTP client retry test failing (38/39 tests passing)</li>
                                <li>‚Ä¢ Some tests require Docker containers to be running</li>
                                <li>‚Ä¢ Total test suite: 674 tests (442 active, 202 skipped, 30 failing)</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Hunt Scoring System Section -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200">
            <div class="p-6">
                <button onclick="toggleSection('scoring')" class="w-full text-left flex items-center justify-between">
                    <h2 class="text-2xl font-bold text-gray-900 flex items-center">
                        <span class="mr-3">üéØ</span>
                        Hunt Scoring System Logic
                    </h2>
                    <svg id="scoring-icon" class="w-6 h-6 text-gray-500 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                </button>
                
                <div id="scoring-content" class="mt-6 hidden">
                    <div class="prose max-w-none">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Logarithmic Bucket Scoring System</h3>
                        <p class="text-gray-600 mb-4">The system uses logarithmic buckets with diminishing returns to provide realistic score distributions based on Windows malware keywords analysis across 319 articles.</p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                                <h4 class="font-semibold text-green-800 mb-2">Perfect Discriminators (75 points max)</h4>
                                <p class="text-sm text-green-700 mb-2">Keywords that appear exclusively in "Chosen" content:</p>
                                <ul class="text-xs text-green-600 space-y-1">
                                    <li>‚Ä¢ Process Names: rundll32, msiexec, svchost, lsass.exe</li>
                                    <li>‚Ä¢ Registry: hklm, appdata, programdata, WINDIR</li>
                                    <li>‚Ä¢ Commands: iex, wmic, powershell.exe</li>
                                    <li>‚Ä¢ File Types: .lnk, .iso</li>
                                    <li>‚Ä¢ Technical: MZ, -accepteula, wintmp</li>
                                </ul>
                            </div>
                            
                            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                                <h4 class="font-semibold text-blue-800 mb-2">LOLBAS Executables (10 points max)</h4>
                                <p class="text-sm text-blue-700 mb-2">40+ legitimate Windows executables commonly abused:</p>
                                <ul class="text-xs text-blue-600 space-y-1">
                                    <li>‚Ä¢ System Tools: certutil.exe, cmd.exe, reg.exe</li>
                                    <li>‚Ä¢ Network Tools: bitsadmin.exe, netsh.exe, wmic.exe</li>
                                    <li>‚Ä¢ Script Engines: cscript.exe, mshta.exe, wscript.exe</li>
                                    <li>‚Ä¢ Installation: msiexec.exe, regsvr32.exe, rundll32.exe</li>
                                </ul>
                            </div>
                        </div>

                        <h4 class="font-semibold text-gray-800 mb-3">Scoring Formula</h4>
                        <div class="bg-gray-50 rounded-lg p-4 mb-4">
                            <div class="font-mono text-sm space-y-1">
                                <div>Perfect Score = min(35 √ó log(matches + 1), 75.0)</div>
                                <div>LOLBAS Score = min(5 √ó log(matches + 1), 10.0)</div>
                                <div>Intelligence Score = min(4 √ó log(matches + 1), 10.0)</div>
                                <div>Good Score = min(2.5 √ó log(matches + 1), 5.0)</div>
                                <div>Negative Penalty = min(3 √ó log(matches + 1), 10.0)</div>
                                <div class="font-semibold text-gray-800">Final Score = max(0.0, min(100.0, perfect + good + lolbas + intelligence - negative))</div>
                            </div>
                        </div>

                        <h4 class="font-semibold text-gray-800 mb-3">Score Distribution (754 articles)</h4>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4">
                            <div class="text-center p-3 bg-gray-100 rounded">
                                <div class="text-2xl font-bold text-gray-800">730</div>
                                <div class="text-sm text-gray-600">0-19 (96.8%)</div>
                                <div class="text-xs text-gray-500">Low value</div>
                            </div>
                            <div class="text-center p-3 bg-yellow-100 rounded">
                                <div class="text-2xl font-bold text-yellow-800">12</div>
                                <div class="text-sm text-gray-600">20-39 (1.6%)</div>
                                <div class="text-xs text-gray-500">Moderate</div>
                            </div>
                            <div class="text-center p-3 bg-blue-100 rounded">
                                <div class="text-2xl font-bold text-blue-800">8</div>
                                <div class="text-sm text-gray-600">40-59 (1.1%)</div>
                                <div class="text-xs text-gray-500">Good</div>
                            </div>
                            <div class="text-center p-3 bg-green-100 rounded">
                                <div class="text-2xl font-bold text-green-800">3</div>
                                <div class="text-sm text-gray-600">60-79 (0.4%)</div>
                                <div class="text-xs text-gray-500">High value</div>
                            </div>
                        </div>

                        <div class="mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                            <h4 class="font-semibold text-blue-800 mb-2">üí° Benefits</h4>
                            <ul class="text-sm text-blue-700 space-y-1">
                                <li>‚Ä¢ Automatic quality assessment without manual review</li>
                                <li>‚Ä¢ Data-driven scoring based on actual article classification</li>
                                <li>‚Ä¢ Technical focus on actionable threat hunting content</li>
                                <li>‚Ä¢ Scalable system that works for all incoming articles</li>
                                <li>‚Ä¢ Advanced regex support for cmd.exe obfuscation patterns</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Web Scraper Section -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200">
            <div class="p-6">
                <button onclick="toggleSection('scraper')" class="w-full text-left flex items-center justify-between">
                    <h2 class="text-2xl font-bold text-gray-900 flex items-center">
                        <span class="mr-3">üï∑Ô∏è</span>
                        Web Scraper Configuration
                    </h2>
                    <svg id="scraper-icon" class="w-6 h-6 text-gray-500 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                </button>
                
                <div id="scraper-content" class="mt-6 hidden">
                    <div class="prose max-w-none">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">How the Web Scraper Works</h3>
                        <p class="text-gray-600 mb-4">Huntable CTI Scraper uses a hybrid approach combining RSS feeds and web scraping to collect threat intelligence content from 50+ premium sources.</p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                                <h4 class="font-semibold text-green-800 mb-2">üîÑ RSS-First Approach</h4>
                                <p class="text-sm text-green-700 mb-2">Preferred method for most sources:</p>
                                <ul class="text-xs text-green-600 space-y-1">
                                    <li>‚Ä¢ Automatic fallback to web scraping if RSS fails</li>
                                    <li>‚Ä¢ Respects robots.txt and rate limiting</li>
                                    <li>‚Ä¢ Efficient and respectful to source servers</li>
                                    <li>‚Ä¢ Full content extraction from RSS feeds</li>
                                </ul>
                            </div>
                            
                            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                                <h4 class="font-semibold text-blue-800 mb-2">üï∑Ô∏è Web Scraping Fallback</h4>
                                <p class="text-sm text-blue-700 mb-2">When RSS is unavailable or blocked:</p>
                                <ul class="text-xs text-blue-600 space-y-1">
                                    <li>‚Ä¢ Modern CSS selectors for content extraction</li>
                                    <li>‚Ä¢ JSON-LD structured data support</li>
                                    <li>‚Ä¢ Anti-bot protection bypass</li>
                                    <li>‚Ä¢ Configurable rate limiting</li>
                                </ul>
                            </div>
                        </div>

                        <h4 class="font-semibold text-gray-800 mb-3">Configurable Parameters</h4>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Parameter</th>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Description</th>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Default</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-medium text-gray-900">Check Frequency</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">How often to check for new content</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">30 minutes</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-medium text-gray-900">Lookback Window</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Days back to look for articles</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">180 days</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-medium text-gray-900">Min Content Length</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Minimum article length to collect</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">2000 characters</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-medium text-gray-900">Rate Limiting</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Requests per minute limit</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">5-10 requests/min</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-medium text-gray-900">User Agent</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Browser identification string</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Modern browser UA</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h4 class="font-semibold text-gray-800 mb-3 mt-6">Premium Threat Intelligence Sources</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4">
                            <div class="bg-red-50 border border-red-200 rounded-lg p-3">
                                <h5 class="font-semibold text-red-800 text-sm">üî¥ Premium Sources</h5>
                                <ul class="text-xs text-red-600 space-y-1 mt-1">
                                    <li>‚Ä¢ Cisco Talos Intelligence</li>
                                    <li>‚Ä¢ Palo Alto Unit42</li>
                                    <li>‚Ä¢ Kaspersky Securelist</li>
                                    <li>‚Ä¢ Microsoft Security</li>
                                    <li>‚Ä¢ Group-IB Threat Intel</li>
                                </ul>
                            </div>
                            <div class="bg-orange-50 border border-orange-200 rounded-lg p-3">
                                <h5 class="font-semibold text-orange-800 text-sm">üü† Research Sources</h5>
                                <ul class="text-xs text-orange-600 space-y-1 mt-1">
                                    <li>‚Ä¢ VMRay Blog</li>
                                    <li>‚Ä¢ Huntress Blog</li>
                                    <li>‚Ä¢ Elastic Security Labs</li>
                                    <li>‚Ä¢ Check Point Research</li>
                                    <li>‚Ä¢ SentinelOne Labs</li>
                                </ul>
                            </div>
                            <div class="bg-blue-50 border border-blue-200 rounded-lg p-3">
                                <h5 class="font-semibold text-blue-800 text-sm">üîµ News Sources</h5>
                                <ul class="text-xs text-blue-600 space-y-1 mt-1">
                                    <li>‚Ä¢ The Hacker News</li>
                                    <li>‚Ä¢ Bleeping Computer</li>
                                    <li>‚Ä¢ Dark Reading</li>
                                    <li>‚Ä¢ SecurityWeek</li>
                                    <li>‚Ä¢ SANS ISC</li>
                                </ul>
                            </div>
                        </div>

                        <div class="mt-6 p-4 bg-green-50 border border-green-200 rounded-lg">
                            <h4 class="font-semibold text-green-800 mb-2">üéØ Content Filtering</h4>
                            <p class="text-sm text-green-700 mb-2">Advanced filtering ensures only high-quality threat intelligence content is collected:</p>
                            <ul class="text-sm text-green-600 space-y-1">
                                <li>‚Ä¢ Title keyword filtering (removes webinars, job postings, etc.)</li>
                                <li>‚Ä¢ Content length requirements (minimum 2000 characters)</li>
                                <li>‚Ä¢ URL pattern matching for relevant articles only</li>
                                <li>‚Ä¢ Threat intelligence keyword requirements for some sources</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chunk Debugging Modal Section -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200">
            <div class="p-6">
                <button onclick="toggleSection('chunk-debug')" class="w-full text-left flex items-center justify-between">
                    <h2 class="text-2xl font-bold text-gray-900 flex items-center">
                        <span class="mr-3">üîç</span>
                        Chunk Debugging Modal
                    </h2>
                    <svg id="chunk-debug-icon" class="w-6 h-6 text-gray-500 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                </button>
                
                <div id="chunk-debug-content" class="mt-6 hidden">
                    <div class="prose max-w-none">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Advanced Chunk Analysis Tool</h3>
                        <p class="text-gray-600 mb-4">The Chunk Debugging Modal provides detailed insights into how articles are processed, filtered, and analyzed by the ML-based content filtering system.</p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                                <h4 class="font-semibold text-blue-800 mb-2">üîç Visual Chunk Analysis</h4>
                                <ul class="text-xs text-blue-600 space-y-1">
                                    <li>‚Ä¢ Interactive chunk visualization with color-coded filtering decisions</li>
                                    <li>‚Ä¢ Real-time threshold adjustment with slider control</li>
                                    <li>‚Ä¢ Chunk-by-chunk analysis of ML predictions</li>
                                    <li>‚Ä¢ Cost savings calculation and optimization metrics</li>
                                </ul>
                            </div>
                            
                            <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                                <h4 class="font-semibold text-green-800 mb-2">üìä Detailed Metrics</h4>
                                <ul class="text-xs text-green-600 space-y-1">
                                    <li>‚Ä¢ Perfect discriminator detection and scoring</li>
                                    <li>‚Ä¢ LOLBAS executable pattern matching</li>
                                    <li>‚Ä¢ Threat keyword density analysis</li>
                                    <li>‚Ä¢ ML confidence scores and feature extraction</li>
                                </ul>
                            </div>
                        </div>

                        <h4 class="font-semibold text-gray-800 mb-3">How to Access</h4>
                        <div class="bg-gray-50 rounded-lg p-4 mb-4">
                            <div class="space-y-3 text-sm">
                                <div class="flex items-start">
                                    <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold mr-3 mt-0.5">1</span>
                                    <div>
                                        <strong>Navigate to Article:</strong> Go to any article detail page
                                    </div>
                                </div>
                                <div class="flex items-start">
                                    <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold mr-3 mt-0.5">2</span>
                                    <div>
                                        <strong>Open Debug Modal:</strong> Click the "üîç Debug Chunks" button in the article header
                                    </div>
                                </div>
                                <div class="flex items-start">
                                    <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold mr-3 mt-0.5">3</span>
                                    <div>
                                        <strong>Analyze Results:</strong> Review chunk analysis, adjust thresholds, and examine filtering decisions
                                    </div>
                                </div>
                                <div class="flex items-start">
                                    <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold mr-3 mt-0.5">4</span>
                                    <div>
                                        <strong>Provide Feedback:</strong> Use single-click feedback buttons to correct ML predictions
                                    </div>
                                </div>
                            </div>
                        </div>

                        <h4 class="font-semibold text-gray-800 mb-3">Key Features</h4>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Feature</th>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Description</th>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Benefit</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-medium text-gray-900">Threshold Slider</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Real-time adjustment of ML confidence threshold (0.5-0.8)</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Optimize filtering sensitivity</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-medium text-gray-900">Chunk Filtering</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Filter chunks by status (kept/removed/threat/perfect/ml/mismatch)</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Focus on specific content types</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-medium text-gray-900">Cost Analysis</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Calculate GPT-4o API cost savings from filtering</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Quantify optimization benefits</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-medium text-gray-900">ML Details</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Show ML prediction confidence and feature analysis</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Understand filtering decisions</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-medium text-gray-900">Feedback System</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Single-click feedback on ML predictions with labels</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Improve model accuracy</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-medium text-gray-900">ML Mismatch Detection</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Identify discrepancies between ML predictions and actual decisions</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Debug filtering inconsistencies</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-medium text-gray-900">Model Retraining</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Trigger model retraining with user feedback</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Improve filtering accuracy</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                            <h4 class="font-semibold text-yellow-800 mb-2">üí° Use Cases</h4>
                            <ul class="text-sm text-yellow-700 space-y-1">
                                <li>‚Ä¢ <strong>Content Quality Assessment:</strong> Verify that high-value threat hunting content is preserved</li>
                                <li>‚Ä¢ <strong>Cost Optimization:</strong> Analyze filtering effectiveness and adjust thresholds</li>
                                <li>‚Ä¢ <strong>ML Model Validation:</strong> Review ML predictions and identify improvement opportunities</li>
                                <li>‚Ä¢ <strong>Debugging Filter Issues:</strong> Investigate why specific content is filtered or kept</li>
                                <li>‚Ä¢ <strong>Threshold Tuning:</strong> Find optimal confidence thresholds for your use case</li>
                                <li>‚Ä¢ <strong>Feedback Collection:</strong> Provide corrections to improve ML model accuracy</li>
                                <li>‚Ä¢ <strong>Mismatch Analysis:</strong> Identify and resolve ML prediction inconsistencies</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- AI Assistant Section -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200">
            <div class="p-6">
                <button onclick="toggleSection('ai')" class="w-full text-left flex items-center justify-between">
                    <h2 class="text-2xl font-bold text-gray-900 flex items-center">
                        <span class="mr-3">ü§ñ</span>
                        AI Assistant & Chunking Logic
                    </h2>
                    <svg id="ai-icon" class="w-6 h-6 text-gray-500 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                </button>
                
                <div id="ai-content" class="mt-6 hidden">
                    <div class="prose max-w-none">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">AI-Powered Content Analysis</h3>
                        <p class="text-gray-600 mb-4">Huntable CTI Scraper uses multiple AI models to analyze threat intelligence content, generate summaries, and create SIGMA rules for detection engineering.</p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                            <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                                <h4 class="font-semibold text-green-800 mb-2">ü§ñ ChatGPT (OpenAI)</h4>
                                <ul class="text-xs text-green-600 space-y-1">
                                    <li>‚Ä¢ Fast, high-quality responses</li>
                                    <li>‚Ä¢ Excellent for summaries</li>
                                    <li>‚Ä¢ Requires OpenAI API key</li>
                                    <li>‚Ä¢ Cost-effective for most tasks</li>
                                </ul>
                            </div>
                            <div class="bg-purple-50 border border-purple-200 rounded-lg p-4">
                                <h4 class="font-semibold text-purple-800 mb-2">üß† Claude (Anthropic)</h4>
                                <ul class="text-xs text-purple-600 space-y-1">
                                    <li>‚Ä¢ Advanced reasoning capabilities</li>
                                    <li>‚Ä¢ Long context understanding</li>
                                    <li>‚Ä¢ Requires Anthropic API key</li>
                                    <li>‚Ä¢ Best for complex analysis</li>
                                </ul>
                            </div>
                            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                                <h4 class="font-semibold text-blue-800 mb-2">ü¶ô Llama (Local Ollama)</h4>
                                <ul class="text-xs text-blue-600 space-y-1">
                                    <li>‚Ä¢ Local processing, no API costs</li>
                                    <li>‚Ä¢ Fast and private</li>
                                    <li>‚Ä¢ No external dependencies</li>
                                    <li>‚Ä¢ Good for basic analysis</li>
                                </ul>
                            </div>
                        </div>

                        <h4 class="font-semibold text-gray-800 mb-3">Content Chunking Algorithm</h4>
                        <p class="text-gray-600 mb-4">The system uses intelligent chunking to break down large articles into manageable pieces for AI analysis while preserving context and technical details.</p>
                        
                        <div class="bg-gray-50 rounded-lg p-4 mb-4">
                            <h5 class="font-semibold text-gray-800 mb-2">Chunking Parameters</h5>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <div class="text-sm font-medium text-gray-700">Chunk Size: 1000 characters</div>
                                    <div class="text-xs text-gray-500">Maximum characters per chunk</div>
                                </div>
                                <div>
                                    <div class="text-sm font-medium text-gray-700">Overlap: 200 characters</div>
                                    <div class="text-xs text-gray-500">Characters to overlap between chunks</div>
                                </div>
                                <div>
                                    <div class="text-sm font-medium text-gray-700">Sentence Boundary Breaking</div>
                                    <div class="text-xs text-gray-500">Breaks at sentence endings when possible</div>
                                </div>
                                <div>
                                    <div class="text-sm font-medium text-gray-700">Context Preservation</div>
                                    <div class="text-xs text-gray-500">Maintains technical content integrity</div>
                                </div>
                            </div>
                        </div>

                        <h4 class="font-semibold text-gray-800 mb-3">Enhanced Content Filtering System</h4>
                        <p class="text-gray-600 mb-4">Advanced ML-based filtering with hunt scoring integration reduces API costs by 20-80% while maintaining analysis quality.</p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
                            <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                                <h5 class="font-semibold text-green-800 mb-2">‚úÖ Huntable Patterns (130+ patterns)</h5>
                                <ul class="text-xs text-green-600 space-y-1">
                                    <li>‚Ä¢ Perfect discriminators: rundll32, msiexec, powershell.exe</li>
                                    <li>‚Ä¢ LOLBAS executables: certutil, schtasks, wmic, regsvr32</li>
                                    <li>‚Ä¢ Cross-platform: Windows, macOS, Linux patterns</li>
                                    <li>‚Ä¢ Intelligence indicators: APT groups, campaigns, TTPs</li>
                                    <li>‚Ä¢ Obfuscation patterns: cmd.exe obfuscation techniques</li>
                                </ul>
                            </div>
                            
                            <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                                <h5 class="font-semibold text-red-800 mb-2">‚ùå Not Huntable Patterns</h5>
                                <ul class="text-xs text-red-600 space-y-1">
                                    <li>‚Ä¢ Acknowledgments: gratitude, thank you</li>
                                    <li>‚Ä¢ Contact info: contact mandiant, investigations</li>
                                    <li>‚Ä¢ Marketing: book a demo, try free</li>
                                    <li>‚Ä¢ General statements: this highlights how</li>
                                    <li>‚Ä¢ Navigation: platform solutions resources</li>
                                </ul>
                            </div>
                        </div>

                        <h4 class="font-semibold text-gray-800 mb-3">Machine Learning Model</h4>
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div>
                                    <div class="text-sm font-medium text-blue-800">Algorithm</div>
                                    <div class="text-xs text-blue-600">RandomForestClassifier</div>
                                </div>
                                <div>
                                    <div class="text-sm font-medium text-blue-800">Accuracy</div>
                                    <div class="text-xs text-blue-600">80% on test data</div>
                                </div>
                                <div>
                                    <div class="text-sm font-medium text-blue-800">Features</div>
                                    <div class="text-xs text-blue-600">23 extracted features per chunk</div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                            <h4 class="font-semibold text-yellow-800 mb-2">üí∞ Cost Optimization</h4>
                            <p class="text-sm text-yellow-700 mb-2">The filtering system provides significant cost savings:</p>
                            <ul class="text-sm text-yellow-600 space-y-1">
                                <li>‚Ä¢ 20-80% content reduction before AI analysis</li>
                                <li>‚Ä¢ Configurable confidence thresholds (0.5-0.8)</li>
                                <li>‚Ä¢ Perfect discriminator protection (threat hunting keywords never filtered)</li>
                                <li>‚Ä¢ Real-time cost savings calculation</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- RAG Chat Interface Section -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200">
            <div class="p-6">
                <button onclick="toggleSection('rag-chat')" class="w-full text-left flex items-center justify-between">
                    <h2 class="text-2xl font-bold text-gray-900 flex items-center">
                        <span class="mr-3">üí¨</span>
                        RAG Chat Interface
                    </h2>
                    <svg id="rag-chat-icon" class="w-6 h-6 text-gray-500 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                </button>
                
                <div id="rag-chat-content" class="mt-6 hidden">
                    <div class="prose max-w-none">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Interactive Threat Intelligence Chat</h3>
                        <p class="text-gray-600 mb-4">The RAG (Retrieval-Augmented Generation) chat interface allows you to interact with your threat intelligence database using natural language queries and semantic search.</p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                                <h4 class="font-semibold text-blue-800 mb-2">üîç Semantic Search</h4>
                                <ul class="text-xs text-blue-600 space-y-1">
                                    <li>‚Ä¢ Vector embeddings using Sentence Transformers</li>
                                    <li>‚Ä¢ Semantic similarity search across all articles</li>
                                    <li>‚Ä¢ Context-aware retrieval of relevant content</li>
                                    <li>‚Ä¢ Cross-reference related threat intelligence</li>
                                </ul>
                            </div>
                            
                            <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                                <h4 class="font-semibold text-green-800 mb-2">ü§ñ AI-Powered Responses</h4>
                                <ul class="text-xs text-green-600 space-y-1">
                                    <li>‚Ä¢ Multiple AI model support (ChatGPT, Claude, Ollama)</li>
                                    <li>‚Ä¢ Template-based responses with LLM enhancement</li>
                                    <li>‚Ä¢ Clickable article links in responses</li>
                                    <li>‚Ä¢ Context-aware analysis and summaries</li>
                                </ul>
                            </div>
                        </div>

                        <h4 class="font-semibold text-gray-800 mb-3">How to Use</h4>
                        <div class="bg-gray-50 rounded-lg p-4 mb-4">
                            <div class="space-y-3 text-sm">
                                <div class="flex items-start">
                                    <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold mr-3 mt-0.5">1</span>
                                    <div>
                                        <strong>Access Chat:</strong> Click the "üí¨ Chat" button in the navigation menu
                                    </div>
                                </div>
                                <div class="flex items-start">
                                    <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold mr-3 mt-0.5">2</span>
                                    <div>
                                        <strong>Ask Questions:</strong> Type natural language queries about threat intelligence
                                    </div>
                                </div>
                                <div class="flex items-start">
                                    <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold mr-3 mt-0.5">3</span>
                                    <div>
                                        <strong>Explore Results:</strong> Click on article links to view detailed content
                                    </div>
                                </div>
                            </div>
                        </div>

                        <h4 class="font-semibold text-gray-800 mb-3">Example Queries</h4>
                        <div class="bg-gray-50 rounded-lg p-4 mb-4">
                            <div class="space-y-2 text-sm">
                                <div><span class="font-semibold text-gray-700">"What are the latest ransomware techniques?"</span></div>
                                <div><span class="font-semibold text-gray-700">"Show me articles about APT28 campaigns"</span></div>
                                <div><span class="font-semibold text-gray-700">"Find IOCs related to phishing attacks"</span></div>
                                <div><span class="font-semibold text-gray-700">"What are the newest LOLBAS techniques?"</span></div>
                                <div><span class="font-semibold text-gray-700">"Show me articles about CVE-2024-*"</span></div>
                            </div>
                        </div>

                        <h4 class="font-semibold text-gray-800 mb-3">Key Features</h4>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Feature</th>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Description</th>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Benefit</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-medium text-gray-900">Semantic Search</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Vector-based similarity search across all articles</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Find relevant content even with different wording</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-medium text-gray-900">AI Responses</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Intelligent analysis and summarization of results</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Get contextual insights and summaries</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-medium text-gray-900">Clickable Links</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Direct links to relevant articles in responses</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Quick access to source material</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-medium text-gray-900">Multiple Models</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Support for ChatGPT, Claude, and local Ollama</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Choose the best AI model for your needs</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-medium text-gray-900">Context Preservation</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Maintains conversation context across queries</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">More natural and coherent interactions</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="mt-6 p-4 bg-green-50 border border-green-200 rounded-lg">
                            <h4 class="font-semibold text-green-800 mb-2">‚úÖ Benefits</h4>
                            <ul class="text-sm text-green-700 space-y-1">
                                <li>‚Ä¢ <strong>Natural Language Queries:</strong> Ask questions in plain English</li>
                                <li>‚Ä¢ <strong>Semantic Understanding:</strong> Find content by meaning, not just keywords</li>
                                <li>‚Ä¢ <strong>Contextual Analysis:</strong> Get intelligent summaries and insights</li>
                                <li>‚Ä¢ <strong>Rapid Discovery:</strong> Quickly find relevant threat intelligence</li>
                                <li>‚Ä¢ <strong>Interactive Exploration:</strong> Follow up with related questions</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Guide Section -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200">
            <div class="p-6">
                <button onclick="toggleSection('settings')" class="w-full text-left flex items-center justify-between">
                    <h2 class="text-2xl font-bold text-gray-900 flex items-center">
                        <span class="mr-3">‚öôÔ∏è</span>
                        Settings Tab Guide
                    </h2>
                    <svg id="settings-icon" class="w-6 h-6 text-gray-500 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                </button>
                
                <div id="settings-content" class="mt-6 hidden">
                    <div class="prose max-w-none">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Configuration Overview</h3>
                        <p class="text-gray-600 mb-4">The Settings tab allows you to configure AI models, API keys, SIGMA rule generation, and other system preferences.</p>
                        
                        <div class="space-y-6">
                            <!-- AI Assistant Configuration -->
                            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                                <h4 class="font-semibold text-blue-800 mb-3">ü§ñ AI Assistant Configuration</h4>
                                <div class="space-y-3">
                                    <div>
                                        <div class="text-sm font-medium text-blue-700">Preferred AI Model</div>
                                        <div class="text-xs text-blue-600">Choose between ChatGPT, Claude, or Llama for analysis</div>
                                    </div>
                                    <div>
                                        <div class="text-sm font-medium text-blue-700">API Keys</div>
                                        <div class="text-xs text-blue-600">Configure OpenAI and Anthropic API keys for external AI services</div>
                                    </div>
                                </div>
                            </div>

                            <!-- SIGMA Rule Configuration -->
                            <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                                <h4 class="font-semibold text-green-800 mb-3">üìã SIGMA Rule Configuration</h4>
                                <div class="space-y-3">
                                    <div>
                                        <div class="text-sm font-medium text-green-700">SIGMA Author</div>
                                        <div class="text-xs text-green-600">Your name/identifier for generated SIGMA rules</div>
                                    </div>
                                    <div>
                                        <div class="text-sm font-medium text-green-700">Comment Prompts</div>
                                        <div class="text-xs text-green-600">Enable/disable descriptive comments in SIGMA rules</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Display Preferences -->
                            <div class="bg-purple-50 border border-purple-200 rounded-lg p-4">
                                <h4 class="font-semibold text-purple-800 mb-3">üé® Display Preferences</h4>
                                <div class="space-y-3">
                                    <div>
                                        <div class="text-sm font-medium text-purple-700">Articles Per Page</div>
                                        <div class="text-xs text-purple-600">Number of articles to display per page (25, 50, 100)</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <h4 class="font-semibold text-gray-800 mb-3 mt-6">Configuration Categories</h4>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Section</th>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Purpose</th>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Key Settings</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-medium text-gray-900">AI Assistant</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Configure AI models and API access</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Model selection, API keys</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-medium text-gray-900">SIGMA Rules</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Customize rule generation</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Author name, comment prompts</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-medium text-gray-900">Display</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">UI preferences and pagination</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">Articles per page</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-2 text-sm font-medium text-gray-900">API Configuration</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">External service integration</td>
                                        <td class="px-4 py-2 text-sm text-gray-500">OpenAI, Anthropic keys</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="mt-6 p-4 bg-green-50 border border-green-200 rounded-lg">
                            <h4 class="font-semibold text-green-800 mb-2">üíæ Settings Persistence</h4>
                            <p class="text-sm text-green-700 mb-2">All settings are automatically saved to your browser's local storage:</p>
                            <ul class="text-sm text-green-600 space-y-1">
                                <li>‚Ä¢ Settings persist across browser sessions</li>
                                <li>‚Ä¢ No server-side storage required</li>
                                <li>‚Ä¢ Instant configuration changes</li>
                                <li>‚Ä¢ Per-browser customization support</li>
                            </ul>
                        </div>

                        <div class="mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                            <h4 class="font-semibold text-yellow-800 mb-2">üîí Security Notes</h4>
                            <ul class="text-sm text-yellow-700 space-y-1">
                                <li>‚Ä¢ API keys are stored locally in your browser only</li>
                                <li>‚Ä¢ No API keys are transmitted to external servers except for AI analysis</li>
                                <li>‚Ä¢ Clear browser data to remove stored API keys</li>
                                <li>‚Ä¢ Use environment variables for production deployments</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

<script>
function toggleSection(sectionId) {
    const content = document.getElementById(sectionId + '-content');
    const icon = document.getElementById(sectionId + '-icon');
    
    if (content.classList.contains('hidden')) {
        content.classList.remove('hidden');
        icon.classList.add('rotate-180');
    } else {
        content.classList.add('hidden');
        icon.classList.remove('rotate-180');
    }
}

// Initialize with first section open
document.addEventListener('DOMContentLoaded', function() {
    toggleSection('filtering');
});
</script>

<style>
.rotate-180 {
    transform: rotate(180deg);
}
</style>
{% endblock %}
