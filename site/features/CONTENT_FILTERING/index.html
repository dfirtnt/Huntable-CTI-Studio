
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Modern docs for Huntable CTI Studio (CTIScraper)">
      
      
      
      
        <link rel="prev" href="../CONTENT_FILTER_ML_SETUP/">
      
      
        <link rel="next" href="../CMDLINE_ATTENTION_PREPROCESSOR/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Content Filtering - Huntable CTI Studio</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/stackedit.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#gpt-4o-content-filtering-system-documentation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Huntable CTI Studio" class="md-header__button md-logo" aria-label="Huntable CTI Studio" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Huntable CTI Studio
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Content Filtering
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Huntable CTI Studio" class="md-nav__button md-logo" aria-label="Huntable CTI Studio" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Huntable CTI Studio
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quickstart
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Concepts
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Concepts
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/huntables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Huntables
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Agents
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/pipelines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pipelines
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/observables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Observables
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    How-To
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    How-To
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../howto/run_locally/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Run locally
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../howto/add_feed/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Add feed
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../howto/extract_observables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Extract observables
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../howto/generate_sigma/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Generate Sigma
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../howto/evaluate_models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Evaluate models
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CLI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Config
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/schemas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Schemas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sigma/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sigma
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/versioning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Versioning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Internals
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Internals
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../internals/architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../internals/scoring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Scoring
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../internals/chunking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chunking
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../internals/qa_loops/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    QA loops
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Deployment
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Deployment
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/GETTING_STARTED/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/DOCKER_ARCHITECTURE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Docker Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/TECHNICAL_READOUT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Technical Readout
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" checked>
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Advanced
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Advanced
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_1" >
        
          
          <label class="md-nav__link" for="__nav_8_1" id="__nav_8_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    LLM & Models
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    LLM & Models
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LMSTUDIO_INTEGRATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LMStudio Integration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Model_Selection_Guide_CTI_Workflows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Model Selection
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OpenAI_Chat_Models_Reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OpenAI Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2" >
        
          
          <label class="md-nav__link" for="__nav_8_2" id="__nav_8_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    ML & Training
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    ML & Training
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ML_HUNT_SCORING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ML Hunt Scoring
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../HUNTABLE_WINDOWS_CLASSIFIER/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Huntable Windows
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DATABASE_TRAINING_SYSTEM/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Database Training
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CONTENT_FILTER_ML_SETUP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Content Filter ML
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_3" checked>
        
          
          <label class="md-nav__link" for="__nav_8_3" id="__nav_8_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Features
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Features
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Content Filtering
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Content Filtering
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Table of Contents
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        Architecture
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enhanced-annotation-system" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enhanced Annotation System
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ml-vs-hunt-comparison-dashboard" class="md-nav__link">
    <span class="md-ellipsis">
      
        ML vs Hunt Comparison Dashboard
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ML vs Hunt Comparison Dashboard">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-features" class="md-nav__link">
    <span class="md-ellipsis">
      
        Key Features
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recent-improvements-october-2024" class="md-nav__link">
    <span class="md-ellipsis">
      
        Recent Improvements (October 2024)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-features_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Key Features
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Key Features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-real-time-character-counting" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Real-Time Character Counting
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-auto-expand-functionality" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Auto-Expand Functionality
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-manual-expansion-controls" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Manual Expansion Controls
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-live-selection-highlighting" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Live Selection Highlighting
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ml-training-compliance" class="md-nav__link">
    <span class="md-ellipsis">
      
        ML Training Compliance
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usage-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Usage Workflow
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#components" class="md-nav__link">
    <span class="md-ellipsis">
      
        Components
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-content-filter-srcutilscontent_filterpy" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Content Filter (src/utils/content_filter.py)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-gpt-4o-optimizer-srcutilsgpt4o_optimizerpy" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. GPT-4o Optimizer (src/utils/gpt4o_optimizer.py)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-enhanced-api-endpoint-srcwebgpt4o_optimized_endpointpy" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Enhanced API Endpoint (src/web/gpt4o_optimized_endpoint.py)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-frontend-integration-srcwebtemplatesgpt4o_optimized_jsjs" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Frontend Integration (src/web/templates/gpt4o_optimized_js.js)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-it-works" class="md-nav__link">
    <span class="md-ellipsis">
      
        How It Works
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How It Works">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-content-chunking" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1: Content Chunking
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-pattern-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2: Pattern Analysis
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-ml-classification" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 3: ML Classification
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-filtering-decision" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 4: Filtering Decision
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-content-reconstruction" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 5: Content Reconstruction
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#chunk-based-filtering" class="md-nav__link">
    <span class="md-ellipsis">
      
        Chunk-Based Filtering
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Chunk-Based Filtering">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#why-chunk-based" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why Chunk-Based?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chunking-algorithm" class="md-nav__link">
    <span class="md-ellipsis">
      
        Chunking Algorithm
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chunk-size-impact" class="md-nav__link">
    <span class="md-ellipsis">
      
        Chunk Size Impact
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chunk-debugger-safeguards-controls" class="md-nav__link">
    <span class="md-ellipsis">
      
        Chunk Debugger Safeguards &amp; Controls
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pattern-filters" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pattern Filters
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pattern Filters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#huntable-patterns-289-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Huntable Patterns (289 patterns)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#not-huntable-patterns-25-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Not Huntable Patterns (25 patterns)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#machine-learning-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        Machine Learning Model
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Machine Learning Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#model-details" class="md-nav__link">
    <span class="md-ellipsis">
      
        Model Details
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#feature-categories" class="md-nav__link">
    <span class="md-ellipsis">
      
        Feature Categories
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#training-process" class="md-nav__link">
    <span class="md-ellipsis">
      
        Training Process
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Usage Examples
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Usage Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Usage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-integration" class="md-nav__link">
    <span class="md-ellipsis">
      
        API Integration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#web-api-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Web API Usage
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      
        Performance Metrics
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Performance Metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cost-savings-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cost Savings Analysis
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#content-classification-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Content Classification Examples
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#model-performance" class="md-nav__link">
    <span class="md-ellipsis">
      
        Model Performance
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#confidence-thresholds" class="md-nav__link">
    <span class="md-ellipsis">
      
        Confidence Thresholds
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chunk-size-settings" class="md-nav__link">
    <span class="md-ellipsis">
      
        Chunk Size Settings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Environment Variables
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-integration_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        API Integration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      
        New Endpoint
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frontend-integration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Frontend Integration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-issues" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Issues
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debugging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Debugging
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ml-mismatch-analysis-new" class="md-nav__link">
    <span class="md-ellipsis">
      
        ML Mismatch Analysis (NEW)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ML Mismatch Analysis (NEW)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#features" class="md-nav__link">
    <span class="md-ellipsis">
      
        Features
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-integration_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        API Integration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use Cases
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#chunk-debug-interface-new" class="md-nav__link">
    <span class="md-ellipsis">
      
        Chunk Debug Interface (NEW)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Chunk Debug Interface (NEW)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#features_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Features
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filter-options" class="md-nav__link">
    <span class="md-ellipsis">
      
        Filter Options
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#future-enhancements" class="md-nav__link">
    <span class="md-ellipsis">
      
        Future Enhancements
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Future Enhancements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#planned-improvements" class="md-nav__link">
    <span class="md-ellipsis">
      
        Planned Improvements
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contributing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Contributing
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conclusion
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CMDLINE_ATTENTION_PREPROCESSOR/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cmdline Attention Preprocessor
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OS_DETECTION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OS Detection
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OBSERVABLE_EVALUATION_DESIGN/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Observable Evaluation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../SIGMA_DETECTION_RULES/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sigma Rules
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_4" >
        
          
          <label class="md-nav__link" for="__nav_8_4" id="__nav_8_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Operations
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Operations
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/BACKUP_AND_RESTORE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Backup & Restore
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/CROSS_MACHINE_RESTORE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cross Machine Restore
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/MEMORY_OPTIMIZATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Memory Optimization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/SOURCE_CONFIG_PRECEDENCE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Source Config
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/VERIFY_ML_VERSIONS_BACKUP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Verify ML Versions Backup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_5" >
        
          
          <label class="md-nav__link" for="__nav_8_5" id="__nav_8_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Development
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Development
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/DEVELOPMENT_SETUP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/PORT_CONFIGURATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Port Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/WEB_APP_TESTING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Web App Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/DATABASE_QUERY_GUIDE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Database Queries
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/DEBUGGING_TOOLS_GUIDE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Debugging Tools
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/ADVANCED_QUALITY_SYSTEM/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Advanced Quality System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/ALLURE_REPORTS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Allure Reports
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/DEBUG_EVAL_LMSTUDIO_LOGS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Debug Eval Logs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/HYBRID_IOC_EXTRACTION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hybrid IOC Extraction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/LIGHTWEIGHT_INTEGRATION_TESTING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lightweight Integration Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/MULTI_INSTANCE_SETUP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Multi Instance Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/MANUAL_CHECKLIST_30MIN/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Manual Checklist 30min
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/MANUAL_TEST_CHECKLIST/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Manual Test Checklist
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/search-queries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Search Queries
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/boolean-search/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Boolean Search
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/backfill_chunk_analysis_help/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Backfill Chunk Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/TROUBLESHOOT_EVAL_PENDING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Troubleshoot Eval Pending
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/WORKFLOW_QUEUE_SETUP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Workflow Queue Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/WebAppDevtestingGuide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Web App Dev Testing Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CONTRIBUTING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Table of Contents
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        Architecture
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enhanced-annotation-system" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enhanced Annotation System
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ml-vs-hunt-comparison-dashboard" class="md-nav__link">
    <span class="md-ellipsis">
      
        ML vs Hunt Comparison Dashboard
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ML vs Hunt Comparison Dashboard">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-features" class="md-nav__link">
    <span class="md-ellipsis">
      
        Key Features
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recent-improvements-october-2024" class="md-nav__link">
    <span class="md-ellipsis">
      
        Recent Improvements (October 2024)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-features_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Key Features
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Key Features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-real-time-character-counting" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Real-Time Character Counting
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-auto-expand-functionality" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Auto-Expand Functionality
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-manual-expansion-controls" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Manual Expansion Controls
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-live-selection-highlighting" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Live Selection Highlighting
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ml-training-compliance" class="md-nav__link">
    <span class="md-ellipsis">
      
        ML Training Compliance
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usage-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Usage Workflow
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#components" class="md-nav__link">
    <span class="md-ellipsis">
      
        Components
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-content-filter-srcutilscontent_filterpy" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Content Filter (src/utils/content_filter.py)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-gpt-4o-optimizer-srcutilsgpt4o_optimizerpy" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. GPT-4o Optimizer (src/utils/gpt4o_optimizer.py)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-enhanced-api-endpoint-srcwebgpt4o_optimized_endpointpy" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Enhanced API Endpoint (src/web/gpt4o_optimized_endpoint.py)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-frontend-integration-srcwebtemplatesgpt4o_optimized_jsjs" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Frontend Integration (src/web/templates/gpt4o_optimized_js.js)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-it-works" class="md-nav__link">
    <span class="md-ellipsis">
      
        How It Works
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How It Works">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-content-chunking" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1: Content Chunking
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-pattern-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2: Pattern Analysis
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-ml-classification" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 3: ML Classification
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-filtering-decision" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 4: Filtering Decision
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-content-reconstruction" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 5: Content Reconstruction
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#chunk-based-filtering" class="md-nav__link">
    <span class="md-ellipsis">
      
        Chunk-Based Filtering
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Chunk-Based Filtering">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#why-chunk-based" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why Chunk-Based?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chunking-algorithm" class="md-nav__link">
    <span class="md-ellipsis">
      
        Chunking Algorithm
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chunk-size-impact" class="md-nav__link">
    <span class="md-ellipsis">
      
        Chunk Size Impact
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chunk-debugger-safeguards-controls" class="md-nav__link">
    <span class="md-ellipsis">
      
        Chunk Debugger Safeguards &amp; Controls
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pattern-filters" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pattern Filters
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pattern Filters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#huntable-patterns-289-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Huntable Patterns (289 patterns)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#not-huntable-patterns-25-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Not Huntable Patterns (25 patterns)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#machine-learning-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        Machine Learning Model
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Machine Learning Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#model-details" class="md-nav__link">
    <span class="md-ellipsis">
      
        Model Details
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#feature-categories" class="md-nav__link">
    <span class="md-ellipsis">
      
        Feature Categories
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#training-process" class="md-nav__link">
    <span class="md-ellipsis">
      
        Training Process
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Usage Examples
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Usage Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Basic Usage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-integration" class="md-nav__link">
    <span class="md-ellipsis">
      
        API Integration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#web-api-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Web API Usage
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      
        Performance Metrics
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Performance Metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cost-savings-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cost Savings Analysis
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#content-classification-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Content Classification Examples
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#model-performance" class="md-nav__link">
    <span class="md-ellipsis">
      
        Model Performance
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#confidence-thresholds" class="md-nav__link">
    <span class="md-ellipsis">
      
        Confidence Thresholds
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chunk-size-settings" class="md-nav__link">
    <span class="md-ellipsis">
      
        Chunk Size Settings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Environment Variables
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-integration_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        API Integration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      
        New Endpoint
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#frontend-integration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Frontend Integration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-issues" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Issues
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debugging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Debugging
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ml-mismatch-analysis-new" class="md-nav__link">
    <span class="md-ellipsis">
      
        ML Mismatch Analysis (NEW)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ML Mismatch Analysis (NEW)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#features" class="md-nav__link">
    <span class="md-ellipsis">
      
        Features
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-integration_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        API Integration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use Cases
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#chunk-debug-interface-new" class="md-nav__link">
    <span class="md-ellipsis">
      
        Chunk Debug Interface (NEW)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Chunk Debug Interface (NEW)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#features_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Features
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filter-options" class="md-nav__link">
    <span class="md-ellipsis">
      
        Filter Options
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#future-enhancements" class="md-nav__link">
    <span class="md-ellipsis">
      
        Future Enhancements
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Future Enhancements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#planned-improvements" class="md-nav__link">
    <span class="md-ellipsis">
      
        Planned Improvements
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contributing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Contributing
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conclusion
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="gpt-4o-content-filtering-system-documentation">GPT-4o Content Filtering System Documentation</h1>
<h2 id="overview">Overview</h2>
<p>The GPT-4o Content Filtering System is a hybrid machine learning and pattern-based solution designed to reduce OpenAI API costs by intelligently filtering out "not huntable" content before sending it to GPT-4o for analysis. The system achieves <strong>20-80% cost savings</strong> while maintaining analysis quality.</p>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#architecture">Architecture</a></li>
<li><a href="#components">Components</a></li>
<li><a href="#how-it-works">How It Works</a></li>
<li><a href="#chunk-based-filtering">Chunk-Based Filtering</a></li>
<li><a href="#pattern-filters">Pattern Filters</a></li>
<li><a href="#machine-learning-model">Machine Learning Model</a></li>
<li><a href="#enhanced-annotation-system">Enhanced Annotation System</a></li>
<li><a href="#usage-examples">Usage Examples</a></li>
<li><a href="#performance-metrics">Performance Metrics</a></li>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#api-integration">API Integration</a></li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
</ul>
<h2 id="architecture">Architecture</h2>
<p>The system uses a <strong>hybrid approach</strong> combining:</p>
<ol>
<li><strong>Hunt scoring system</strong> (threat hunting quality assessment)</li>
<li><strong>Pattern-based filters</strong> (fast, deterministic)</li>
<li><strong>Machine learning model</strong> (contextual, adaptive with hunt score integration)</li>
<li><strong>Chunk-based analysis</strong> (preserves context)</li>
</ol>
<pre><code>Article Content
      
Chunking (1000 chars, 200 overlap)
      
Hunt Scoring (0-100) + Pattern Analysis + ML Classification
      
Enhanced ML Classification (with hunt score features)
      
Filtered Content (Huntable Chunks Only)
      
GPT-4o API
      
Analysis Results + Cost Savings
</code></pre>
<h2 id="enhanced-annotation-system">Enhanced Annotation System</h2>
<p>The enhanced annotation system provides a sophisticated interface for creating high-quality evaluation data for ML model training. It ensures that evaluation excerpts match the production chunking parameters used by the ML model.</p>
<h2 id="ml-vs-hunt-comparison-dashboard">ML vs Hunt Comparison Dashboard</h2>
<p>The ML vs Hunt Comparison Dashboard provides comprehensive analytics for monitoring and improving ML model performance. It includes:</p>
<h3 id="key-features">Key Features</h3>
<ul>
<li><strong>Time Series Analysis</strong>: Track classification trends across model versions</li>
<li><strong>Model Retraining</strong>: Retrain models with user feedback and track progress</li>
<li><strong>Model Evaluation</strong>: Evaluate model performance on test set with detailed metrics</li>
<li><strong>Performance Visualization</strong>: Radar charts and accuracy trends</li>
<li><strong>Backfill Processing</strong>: Process articles with high hunt scores for analysis</li>
</ul>
<h3 id="recent-improvements-october-2024">Recent Improvements (October 2024)</h3>
<ul>
<li><strong>Fixed Agreement Calculation</strong>: Corrected ml_prediction AND hunt_prediction logic</li>
<li><strong>Percentage-Based Metrics</strong>: Converted from raw counts to percentages for better trend analysis</li>
<li><strong>Chart.js Canvas Management</strong>: Proper chart instance destruction to prevent errors</li>
<li><strong>Data Accuracy</strong>: Removed artificial 10,000 limit to show actual data counts (11,644)</li>
<li><strong>UI/UX Enhancements</strong>: Button state management and visual feedback improvements</li>
</ul>
<h3 id="key-features_1">Key Features</h3>
<h4 id="1-real-time-character-counting">1. Real-Time Character Counting</h4>
<ul>
<li><strong>Live character counter</strong> displays current selection length vs. target (1000 chars)</li>
<li><strong>Color-coded guidance</strong>:</li>
<li> <strong>Green</strong>: Excellent (950-1000 chars) - Optimal for evaluation</li>
<li> <strong>Yellow</strong>: Too short (&lt;800 chars) - Needs more context</li>
<li> <strong>Blue</strong>: Acceptable (800-950 chars) - Good but not optimal</li>
<li> <strong>Red</strong>: Too long (&gt;1000 chars) - Will be chunked differently</li>
</ul>
<h4 id="2-auto-expand-functionality">2. Auto-Expand Functionality</h4>
<ul>
<li><strong> Auto 1000</strong> button automatically expands selections to 1000 characters</li>
<li><strong>Smart boundary detection</strong> respects sentence, paragraph, and word boundaries</li>
<li><strong>Automatic trimming</strong> ensures selections stay within 1000-character limit</li>
<li><strong>Production alignment</strong> matches ML model's chunking parameters</li>
</ul>
<h4 id="3-manual-expansion-controls">3. Manual Expansion Controls</h4>
<ul>
<li><strong>Precise adjustment buttons</strong>: -200, -100, -50, +50, +100, +200 chars</li>
<li><strong>Symmetrical expansion</strong> adds/removes text from both sides equally</li>
<li><strong>Smart boundary detection</strong> prevents cutting mid-word or mid-sentence</li>
</ul>
<h4 id="4-live-selection-highlighting">4. Live Selection Highlighting</h4>
<ul>
<li><strong>Real-time visual feedback</strong> shows expanded text selection in the article</li>
<li><strong>Browser-native highlighting</strong> provides clear visual boundaries</li>
<li><strong>Auto-scroll</strong> brings expanded selections into view when needed</li>
</ul>
<h3 id="ml-training-compliance">ML Training Compliance</h3>
<p>The annotation system ensures evaluation data quality by:</p>
<ol>
<li><strong>Length Optimization</strong>: Targets 950-1000 characters for optimal ML performance</li>
<li><strong>Boundary Respect</strong>: Maintains semantic coherence by respecting text boundaries</li>
<li><strong>Production Alignment</strong>: Matches the exact chunking used in production ML processing</li>
<li><strong>Quality Control</strong>: Visual feedback and guidance prevent suboptimal selections</li>
</ol>
<h3 id="usage-workflow">Usage Workflow</h3>
<ol>
<li><strong>Select text</strong> in any article</li>
<li><strong>Review character count</strong> and length guidance</li>
<li><strong>Use  Auto 1000</strong> for optimal expansion</li>
<li><strong>Verify selection</strong> spans appropriate content</li>
<li><strong>Classify</strong> as huntable/not huntable</li>
<li><strong>Save</strong> to database for ML training</li>
</ol>
<p>This system enables threat intelligence experts to create high-quality, production-aligned evaluation datasets that improve ML model accuracy and performance.</p>
<h2 id="components">Components</h2>
<h3 id="1-content-filter-srcutilscontent_filterpy">1. Content Filter (<code>src/utils/content_filter.py</code>)</h3>
<p><strong>Core filtering engine</strong> with pattern matching and ML classification.</p>
<p><strong>Key Features:</strong>
- <strong>103 perfect discriminators</strong> from threat hunting analysis (87 strings + 16 regex patterns)
- <strong>64 LOLBAS executables</strong> for comprehensive coverage
- <strong>Cross-platform patterns</strong> (Windows, macOS, Linux)
- <strong>Intelligence indicators</strong> (APT groups, campaigns, TTPs)
- <strong>Perfect discriminator protection</strong> - chunks containing threat hunting keywords are never filtered
- <strong>Command line obfuscation pattern support</strong> - advanced regex patterns for cmd.exe obfuscation
- <strong>Hunt score integration</strong> - ML confidence enhanced by threat hunting scores
- RandomForestClassifier with enhanced accuracy through hunt score features
- 27+ extracted features per chunk (including hunt score features)
- Configurable confidence thresholds</p>
<h3 id="2-gpt-4o-optimizer-srcutilsgpt4o_optimizerpy">2. GPT-4o Optimizer (<code>src/utils/gpt4o_optimizer.py</code>)</h3>
<p><strong>Integration layer</strong> for cost optimization and statistics tracking.</p>
<p><strong>Key Features:</strong>
- Content optimization before API calls
- Cost estimation with/without filtering
- Statistics tracking and reporting
- Async/await support</p>
<h3 id="3-enhanced-api-endpoint-srcwebgpt4o_optimized_endpointpy">3. Enhanced API Endpoint (<code>src/web/gpt4o_optimized_endpoint.py</code>)</h3>
<p><strong>New API endpoint</strong> with filtering capabilities.</p>
<p><strong>Endpoint:</strong> <code>/api/articles/{article_id}/gpt4o-rank-optimized</code></p>
<p><strong>Parameters:</strong>
- <code>use_filtering</code>: Enable/disable content filtering
- <code>min_confidence</code>: Confidence threshold (0.5-0.8)</p>
<h3 id="4-frontend-integration-srcwebtemplatesgpt4o_optimized_jsjs">4. Frontend Integration (<code>src/web/templates/gpt4o_optimized_js.js</code>)</h3>
<p><strong>User interface</strong> for optimization controls.</p>
<p><strong>Features:</strong>
- Optimization dialog with cost preview
- Confidence threshold selection
- Real-time cost savings calculation</p>
<h2 id="how-it-works">How It Works</h2>
<h3 id="step-1-content-chunking">Step 1: Content Chunking</h3>
<pre><code class="language-python">chunks = chunk_content(content, chunk_size=1000, overlap=200)
# Example: 2,500 char article  4 overlapping chunks
</code></pre>
<h3 id="step-2-pattern-analysis">Step 2: Pattern Analysis</h3>
<p>Each chunk is analyzed against:
- <strong>Huntable patterns:</strong> <code>powershell\.exe.*-encodedCommand</code>, <code>invoke-webrequest.*-uri</code>, etc.
- <strong>Not huntable patterns:</strong> <code>acknowledgement|gratitude</code>, <code>contact.*mandiant</code>, etc.</p>
<h3 id="step-3-ml-classification">Step 3: ML Classification</h3>
<p>The ML model extracts 23 features and classifies each chunk:
- Pattern match counts
- Text characteristics (length, word count)
- Technical indicators (commands, URLs, IPs)
- Quality ratios (technical vs marketing terms)</p>
<h3 id="step-4-filtering-decision">Step 4: Filtering Decision</h3>
<p>Chunks are kept or removed based on:
- <strong>Perfect discriminator check</strong> - chunks with threat hunting keywords are always preserved
- ML model confidence score
- User-defined threshold (0.5-0.8)
- Pattern match analysis</p>
<h3 id="step-5-content-reconstruction">Step 5: Content Reconstruction</h3>
<p>Only huntable chunks are reassembled and sent to GPT-4o.</p>
<h2 id="chunk-based-filtering">Chunk-Based Filtering</h2>
<h3 id="why-chunk-based">Why Chunk-Based?</h3>
<p><strong> Advantages:</strong>
- Preserves context and sentence integrity
- Avoids fragmenting technical content
- More accurate than word-by-word filtering
- Handles mixed content intelligently
- Configurable granularity</p>
<p><strong> Keyword-only filtering problems:</strong>
- Breaks sentences mid-way
- Loses context around technical terms
- Creates fragmented, unreadable content</p>
<h3 id="chunking-algorithm">Chunking Algorithm</h3>
<pre><code class="language-python">def chunk_content(content: str, chunk_size: int = 1000, overlap: int = 200):
    &quot;&quot;&quot;
    Split content into overlapping chunks.

    Args:
        chunk_size: Maximum characters per chunk
        overlap: Characters to overlap between chunks

    Returns:
        List of (start_offset, end_offset, chunk_text) tuples
    &quot;&quot;&quot;
</code></pre>
<p>When a sentence boundary pulls the chunk end back, the next chunk starts at most at <code>end - overlap</code>
(or simply at <code>end</code> if the chunk is shorter than the overlap) and always moves forward by at least one
character. This keeps the chunks tightly overlapping without leaving any gaps between what the debugger
visualizes and what the filter feeds into the LLM.</p>
<p><strong>Example Chunking:</strong></p>
<pre><code>Original: 1,246 chars
Chunk 1: 0-337 chars    (Technical commands)
Chunk 2: 337-736 chars  (Acknowledgments + technical details)
Chunk 3: 736-1103 chars (Contact info + IP addresses)
Chunk 4: 1103-1246 chars (Lateral movement details)
</code></pre>
<h3 id="chunk-size-impact">Chunk Size Impact</h3>
<table>
<thead>
<tr>
<th>Chunk Size</th>
<th>Chunks Removed</th>
<th>Content Reduction</th>
</tr>
</thead>
<tbody>
<tr>
<td>200 chars</td>
<td>7 chunks</td>
<td>88.0%</td>
</tr>
<tr>
<td>400 chars</td>
<td>3 chunks</td>
<td>73.0%</td>
</tr>
<tr>
<td>600 chars</td>
<td>3 chunks</td>
<td>100.0%</td>
</tr>
<tr>
<td>1000 chars</td>
<td>1 chunk</td>
<td>80.3%</td>
</tr>
</tbody>
</table>
<h3 id="chunk-debugger-safeguards-controls">Chunk Debugger Safeguards &amp; Controls</h3>
<p>Large articles can generate hundreds of chunks, so the debugger balances responsiveness with completeness:</p>
<ul>
<li><strong>Initial Analysis Pass</strong>: Processes up to <code>CHUNK_DEBUG_MAX_CHUNKS</code> (default <strong>150</strong>) using <code>CHUNK_DEBUG_CONCURRENCY</code> workers (default <strong>4</strong>) and a per-chunk timeout defined by <code>CHUNK_DEBUG_CHUNK_TIMEOUT</code> (default <strong>12s</strong>). When the cap is reached, the UI surfaces a  Partial Analysis banner.</li>
<li><strong>Finish Full Analysis</strong>: Analysts can click the inline button to re-run the endpoint with <code>full_analysis=true</code>, optionally using <code>CHUNK_DEBUG_FULL_CONCURRENCY</code> and <code>CHUNK_DEBUG_FULL_TIMEOUT</code> overrides (falling back to the initial values if unset).</li>
<li><strong>Processing Summary</strong>: Every response now includes <code>processing_summary</code> (processed count, total count, remaining chunks, concurrency, timeout, and whether full analysis ran) so operators can audit coverage.</li>
<li><strong>Timeout Visibility</strong>: Chunks that exceed the timeout render with explicit warnings in both the API and UI, making slow regions easy to spot.</li>
<li><strong>Confidence Band Filter</strong>: UI control to isolate chunks with confidence between 40% and 60% for quicker review of borderline decisions.</li>
</ul>
<table>
<thead>
<tr>
<th>Environment Variable</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>CHUNK_DEBUG_MAX_CHUNKS</code></td>
<td><code>150</code></td>
<td>Safety cap before the finish button appears</td>
</tr>
<tr>
<td><code>CHUNK_DEBUG_CONCURRENCY</code></td>
<td><code>4</code></td>
<td>Worker count for the initial analysis pass</td>
</tr>
<tr>
<td><code>CHUNK_DEBUG_CHUNK_TIMEOUT</code></td>
<td><code>12.0</code></td>
<td>Per-chunk timeout (seconds) for the initial pass</td>
</tr>
<tr>
<td><code>CHUNK_DEBUG_FULL_CONCURRENCY</code></td>
<td><em>(optional)</em></td>
<td>Worker override when finishing the analysis</td>
</tr>
<tr>
<td><code>CHUNK_DEBUG_FULL_TIMEOUT</code></td>
<td><em>(optional)</em></td>
<td>Timeout override when finishing the analysis</td>
</tr>
</tbody>
</table>
<p>Tune these values with production telemetry (CPU load, latency, timeout frequency) to match your deployments capacity.</p>
<h2 id="pattern-filters">Pattern Filters</h2>
<p>The pattern-based classification uses the comprehensive Hunt Scoring keyword system from <code>src/utils/content.py</code>, providing 314 total patterns for content classification.</p>
<h3 id="huntable-patterns-289-patterns">Huntable Patterns (289 patterns)</h3>
<p><strong>Perfect Discriminators (103 patterns):</strong>
- <strong>Process Names</strong>: <code>rundll32</code>, <code>msiexec</code>, <code>svchost</code>, <code>lsass.exe</code>, <code>powershell.exe</code>
- <strong>Registry References</strong>: <code>hklm</code>, <code>appdata</code>, <code>programdata</code>, <code>WINDIR</code>, <code>wbem</code>
- <strong>Command Execution</strong>: <code>iex</code>, <code>wmic</code>, <code>comspec</code>, <code>findstr</code>
- <strong>File Types</strong>: <code>.lnk</code>, <code>.iso</code>, <code>MZ</code>, <code>-accepteula</code>
- <strong>Path Patterns</strong>: <code>\temp\</code>, <code>\pipe\</code>, <code>%WINDIR%</code>, <code>%wintmp%</code>
- <strong>Cross-Platform</strong>: <code>homebrew</code>, <code>/users/shared/</code>, <code>chmod 777</code>, <code>tccd</code>, <code>spctl</code>
- <strong>Technical Patterns</strong>: <code>xor</code>, <code>tcp://</code>, <code>CN=</code>, <code>-ComObject</code>, <code>Base64</code></p>
<p><strong>Good Discriminators (77 patterns):</strong>
- <strong>Windows Paths</strong>: <code>c:\windows\</code>, <code>temp</code>, <code>pipe</code>, <code>::</code>
- <strong>File Extensions</strong>: <code>.bat</code>, <code>.ps1</code>, <code>.exe</code>, <code>mach-o</code>, <code>plist</code>
- <strong>Technical Patterns</strong>: <code>==</code>, <code>[.]</code>, <code>--&gt;</code>, <code>currentversion</code>, <code>Event ID</code>
- <strong>Attack Techniques</strong>: <code>mimikatz</code>, <code>kerberoast</code>, <code>psexec</code>, <code>payload</code>
- <strong>Cross-Platform</strong>: <code>osascript</code>, <code>TCC.db</code>, <code>sudo</code>, <code>cron</code>, <code>launchd</code>
- <strong>Cloud/Network</strong>: <code>aws</code>, <code>azure</code>, <code>gcp</code>, <code>ssl</code>, <code>proxy</code>, <code>network</code></p>
<p><strong>LOLBAS Executables (64 patterns):</strong>
- <strong>System Tools</strong>: <code>certutil</code>, <code>cmd</code>, <code>schtasks</code>, <code>wmic</code>, <code>regsvr32</code>, <code>rundll32</code>
- <strong>Network Tools</strong>: <code>bitsadmin</code>, <code>ftp</code>, <code>netsh</code>, <code>powershell</code>
- <strong>Script Engines</strong>: <code>cscript</code>, <code>mshta</code>, <code>wscript</code>, <code>msiexec</code>
- <strong>File Operations</strong>: <code>forfiles</code>, <code>explorer</code>, <code>ieexec</code>, <code>conhost</code>
- <strong>And 30+ more legitimate Windows executables commonly abused by threat actors</strong></p>
<p><strong>Intelligence Indicators (45 patterns):</strong>
- <strong>Threat Activity</strong>: <code>APT</code>, <code>threat actor</code>, <code>campaign</code>, <code>incident</code>, <code>breach</code>, <code>compromise</code>
- <strong>Threat Groups</strong>: <code>FIN</code>, <code>TA</code>, <code>UNC</code>, <code>APT1</code>, <code>APT28</code>, <code>Lazarus</code>, <code>Carbanak</code>
- <strong>Attack Types</strong>: <code>ransomware</code>, <code>data breach</code>, <code>cyber attack</code>, <code>espionage</code>
- <strong>Technical Terms</strong>: <code>IOC</code>, <code>indicator</code>, <code>TTP</code>, <code>technique</code>, <code>malware family</code>
- <strong>Attack Techniques</strong>: <code>golden-ticket</code>, <code>silver-ticket</code>, <code>lateral movement</code></p>
<h3 id="not-huntable-patterns-25-patterns">Not Huntable Patterns (25 patterns)</h3>
<p><strong>Educational/Marketing Content:</strong>
- <code>what is</code>, <code>how to</code>, <code>guide to</code>, <code>tutorial</code>, <code>best practices</code>
- <code>statistics</code>, <code>survey</code>, <code>report shows</code>, <code>study reveals</code>
- <code>learn more</code>, <code>read more</code>, <code>click here</code>, <code>download now</code>
- <code>free trial</code>, <code>contact us</code>, <code>get started</code>, <code>sign up</code>
- <code>blog post</code>, <code>newsletter</code>, <code>webinar</code>, <code>training</code>
- <code>overview</code>, <code>introduction</code>, <code>basics</code>, <code>fundamentals</code></p>
<h2 id="machine-learning-model">Machine Learning Model</h2>
<h3 id="model-details">Model Details</h3>
<p><strong>Algorithm:</strong> RandomForestClassifier
<strong>Training Data:</strong> 222 annotations (167 huntable, 55 not huntable) + 81 feedback samples
<strong>Latest Model:</strong> Trained on 278 total samples
<strong>Accuracy:</strong> 80% on test data (requires validation)
<strong>Features:</strong> 27 extracted features per chunk</p>
<h3 id="feature-categories">Feature Categories</h3>
<p><strong>Pattern-Based Features:</strong>
- <code>huntable_pattern_count</code>: Number of huntable pattern matches
- <code>not_huntable_pattern_count</code>: Number of not huntable pattern matches
- <code>huntable_pattern_ratio</code>: Ratio of huntable patterns to total words
- <code>not_huntable_pattern_ratio</code>: Ratio of not huntable patterns to total words</p>
<p><strong>Text Characteristics:</strong>
- <code>char_count</code>: Total character count
- <code>word_count</code>: Total word count
- <code>sentence_count</code>: Number of sentences
- <code>avg_word_length</code>: Average word length</p>
<p><strong>Technical Content Features:</strong>
- <code>command_count</code>: Number of command patterns
- <code>url_count</code>: Number of URLs
- <code>ip_count</code>: Number of IP addresses
- <code>file_path_count</code>: Number of file paths
- <code>process_count</code>: Number of process names
- <code>cve_count</code>: Number of CVE references
- <code>technical_term_count</code>: Number of technical terms</p>
<p><strong>Quality Indicators:</strong>
- <code>marketing_term_count</code>: Number of marketing terms
- <code>acknowledgment_count</code>: Number of acknowledgment terms
- <code>marketing_term_ratio</code>: Ratio of marketing terms
- <code>technical_term_ratio</code>: Ratio of technical terms</p>
<p><strong>Structural Features:</strong>
- <code>has_code_blocks</code>: Boolean for code block presence
- <code>has_commands</code>: Boolean for command presence
- <code>has_urls</code>: Boolean for URL presence
- <code>has_file_paths</code>: Boolean for file path presence</p>
<p><strong>Hunt Score Integration (NEW):</strong>
- <code>hunt_score</code>: Normalized hunt score (0-1 range)
- <code>hunt_score_high</code>: Boolean for high-quality content (70)
- <code>hunt_score_medium</code>: Boolean for medium-quality content (30-69)
- <code>hunt_score_low</code>: Boolean for low-quality content (&lt;30)</p>
<h3 id="training-process">Training Process</h3>
<pre><code class="language-bash"># Train the model
python3 scripts/train_content_filter.py --data highlighted_text_classifications.csv

# Output:
# Model trained successfully. Accuracy: 0.800
# Classification Report:
#               precision    recall  f1-score   support
# Not Huntable       0.75      1.00      0.86         3
#     Huntable       1.00      0.50      0.67         2
#     accuracy                           0.80         5
</code></pre>
<h2 id="usage-examples">Usage Examples</h2>
<h3 id="basic-usage">Basic Usage</h3>
<pre><code class="language-python">from src.utils.content_filter import ContentFilter

# Initialize filter
filter_system = ContentFilter('models/content_filter.pkl')

# Filter content
result = filter_system.filter_content(
    content=article_content,
    min_confidence=0.7,
    chunk_size=1000
)

print(f&quot;Content reduction: {result.cost_savings:.1%}&quot;)
print(f&quot;Filtered content: {result.filtered_content}&quot;)
</code></pre>
<h3 id="api-integration">API Integration</h3>
<pre><code class="language-python">from src.utils.llm_optimizer import optimize_article_content

# Optimize content for GPT-4o
optimization_result = await optimize_article_content(
    content=article_content,
    min_confidence=0.7
)

if optimization_result['success']:
    print(f&quot;Cost savings: ${optimization_result['cost_savings']:.4f}&quot;)
    print(f&quot;Tokens saved: {optimization_result['tokens_saved']:,}&quot;)
</code></pre>
<h3 id="web-api-usage">Web API Usage</h3>
<pre><code class="language-javascript">// Call optimized endpoint
const response = await fetch(`/api/articles/${articleId}/gpt4o-rank-optimized`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
        api_key: apiKey,
        use_filtering: true,
        min_confidence: 0.7
    })
});

const data = await response.json();
console.log(`Cost savings: $${data.optimization.cost_savings}`);
</code></pre>
<h2 id="performance-metrics">Performance Metrics</h2>
<h3 id="cost-savings-analysis">Cost Savings Analysis</h3>
<p><strong>Sample Content (1,996 chars, ~499 tokens):</strong></p>
<table>
<thead>
<tr>
<th>Confidence Threshold</th>
<th>Content Reduction</th>
<th>Tokens Saved</th>
<th>Cost Savings</th>
</tr>
</thead>
<tbody>
<tr>
<td>0.5 (Aggressive)</td>
<td>52.6%</td>
<td>263</td>
<td>$0.0013</td>
</tr>
<tr>
<td>0.7 (Balanced)</td>
<td>77.7%</td>
<td>388</td>
<td>$0.0019</td>
</tr>
<tr>
<td>0.8 (Conservative)</td>
<td>77.7%</td>
<td>388</td>
<td>$0.0019</td>
</tr>
</tbody>
</table>
<h3 id="content-classification-examples">Content Classification Examples</h3>
<p><strong> KEPT (Sent to OpenAI):</strong>
- <code>"Command: powershell.exe -encodedCommand REDACTEDBASE64PAYLOAD=="</code>
- <code>"Cleartext: Invoke-WebRequest -uri http://REDACTED:REDACTED/d3d11.dll"</code>
- <code>"the Centre.exe executable connected to these IP addresses: 104.21.16[.]1"</code></p>
<p><strong> REMOVED (Not sent to OpenAI):</strong>
- <code>"Acknowledgement We would like to extend our gratitude to the Sitecore team..."</code>
- <code>"Contact Mandiant If you believe your systems may be compromised..."</code>
- <code>"This highlights how quickly threat actors can pivot to leverage new vulnerabilities..."</code></p>
<h3 id="model-performance">Model Performance</h3>
<p><strong>Accuracy:</strong> 80% on test data
<strong>Precision:</strong> 100% for Huntable, 75% for Not Huntable
<strong>Recall:</strong> 50% for Huntable, 100% for Not Huntable</p>
<h2 id="configuration">Configuration</h2>
<h3 id="confidence-thresholds">Confidence Thresholds</h3>
<table>
<thead>
<tr>
<th>Threshold</th>
<th>Filtering Behavior</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td>0.5</td>
<td>Aggressive filtering</td>
<td>Maximum cost savings</td>
</tr>
<tr>
<td>0.7</td>
<td>Balanced filtering</td>
<td>Recommended default</td>
</tr>
<tr>
<td>0.8</td>
<td>Conservative filtering</td>
<td>Preserve more content</td>
</tr>
</tbody>
</table>
<h3 id="chunk-size-settings">Chunk Size Settings</h3>
<table>
<thead>
<tr>
<th>Chunk Size</th>
<th>Granularity</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td>200 chars</td>
<td>Fine-grained</td>
<td>Detailed analysis</td>
</tr>
<tr>
<td>400 chars</td>
<td>Medium</td>
<td>Balanced approach</td>
</tr>
<tr>
<td>1000 chars</td>
<td>Coarse</td>
<td>Default setting</td>
</tr>
</tbody>
</table>
<h3 id="environment-variables">Environment Variables</h3>
<pre><code class="language-bash"># Model path
CONTENT_FILTER_MODEL_PATH=models/content_filter.pkl

# Default settings
DEFAULT_CHUNK_SIZE=1000
DEFAULT_OVERLAP=200
DEFAULT_CONFIDENCE_THRESHOLD=0.7
</code></pre>
<h2 id="api-integration_1">API Integration</h2>
<h3 id="new-endpoint">New Endpoint</h3>
<p><strong>URL:</strong> <code>/api/articles/{article_id}/gpt4o-rank-optimized</code></p>
<p><strong>Method:</strong> POST</p>
<p><strong>Request Body:</strong></p>
<pre><code class="language-json">{
    &quot;api_key&quot;: &quot;sk-...&quot;,
    &quot;use_filtering&quot;: true,
    &quot;min_confidence&quot;: 0.7
}
</code></pre>
<p><strong>Response:</strong></p>
<pre><code class="language-json">{
    &quot;success&quot;: true,
    &quot;article_id&quot;: 123,
    &quot;analysis&quot;: &quot;SIGMA HUNTABILITY SCORE: 8...&quot;,
    &quot;optimization&quot;: {
        &quot;enabled&quot;: true,
        &quot;cost_savings&quot;: 0.0019,
        &quot;tokens_saved&quot;: 388,
        &quot;chunks_removed&quot;: 3,
        &quot;min_confidence&quot;: 0.7
    }
}
</code></pre>
<h3 id="frontend-integration">Frontend Integration</h3>
<pre><code class="language-javascript">// Show optimization dialog
const optimizationOptions = await showOptimizationDialog();

// Call optimized endpoint
const response = await fetch(`/api/articles/${articleId}/gpt4o-rank-optimized`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
        api_key: apiKey,
        use_filtering: optimizationOptions.useFiltering,
        min_confidence: optimizationOptions.minConfidence
    })
});
</code></pre>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="common-issues">Common Issues</h3>
<p><strong>1. Model Not Found</strong></p>
<pre><code>Error: [Errno 2] No such file or directory: 'models/content_filter.pkl'
</code></pre>
<p><strong>Solution:</strong> Train the model first:</p>
<pre><code class="language-bash">python3 scripts/train_content_filter.py
</code></pre>
<p><strong>2. Low Accuracy</strong></p>
<pre><code>Model accuracy: 0.60
</code></pre>
<p><strong>Solution:</strong> 
- Collect more training data
- Retrain with updated annotations
- Adjust feature extraction</p>
<p><strong>3. Too Aggressive Filtering</strong></p>
<pre><code>Content reduction: 95%
</code></pre>
<p><strong>Solution:</strong> 
- Lower confidence threshold (0.5 instead of 0.7)
- Increase chunk size (1000 instead of 400)
- Review pattern rules</p>
<p><strong>4. Missing Technical Content</strong></p>
<pre><code>Technical commands removed incorrectly
</code></pre>
<p><strong>Solution:</strong>
- Add more huntable patterns
- Retrain model with better examples
- Adjust ML feature weights</p>
<h3 id="debugging">Debugging</h3>
<p><strong>Enable Verbose Logging:</strong></p>
<pre><code class="language-python">import logging
logging.basicConfig(level=logging.DEBUG)
</code></pre>
<p><strong>Test Individual Components:</strong></p>
<pre><code class="language-python"># Test pattern matching
is_huntable, confidence = filter_system._pattern_based_classification(text)

# Test ML model
is_huntable, confidence = filter_system.predict_huntability(text)

# Test feature extraction
features = filter_system.extract_features(text)
</code></pre>
<p><strong>Comprehensive Testing:</strong></p>
<pre><code class="language-bash">python3 scripts/test_filter_comprehensive.py
</code></pre>
<h2 id="ml-mismatch-analysis-new">ML Mismatch Analysis (NEW)</h2>
<h3 id="overview_1">Overview</h3>
<p>The system now includes comprehensive ML mismatch analysis to identify discrepancies between ML predictions and actual filtering decisions.</p>
<h3 id="features">Features</h3>
<ul>
<li><strong>Visual Indicators</strong>: Yellow rings around mismatched chunks in visualization</li>
<li><strong>Filter Button</strong>: "Show ML Mismatches" to isolate problematic chunks</li>
<li><strong>Statistics Dashboard</strong>: Real-time accuracy metrics and mismatch counts</li>
<li><strong>Chunk Tags</strong>: "ML MISMATCH" badges for easy identification</li>
</ul>
<h3 id="api-integration_2">API Integration</h3>
<pre><code class="language-python"># Chunk debug endpoint with mismatch analysis
GET /api/articles/{article_id}/chunk-debug

# Response includes:
{
    &quot;ml_stats&quot;: {
        &quot;total_predictions&quot;: 18,
        &quot;correct_predictions&quot;: 13,
        &quot;accuracy_percent&quot;: 72.2,
        &quot;mismatches&quot;: 5
    },
    &quot;chunk_analysis&quot;: [
        {
            &quot;ml_mismatch&quot;: true,
            &quot;ml_prediction_correct&quot;: false,
            &quot;ml_details&quot;: {
                &quot;prediction&quot;: 0,
                &quot;prediction_label&quot;: &quot;Not Huntable&quot;,
                &quot;confidence&quot;: 0.665
            }
        }
    ]
}
</code></pre>
<h3 id="use-cases">Use Cases</h3>
<ul>
<li><strong>Model Validation</strong>: Identify where ML predictions fail</li>
<li><strong>Training Data Collection</strong>: Gather examples for model improvement</li>
<li><strong>Quality Assurance</strong>: Monitor filtering accuracy over time</li>
<li><strong>Debugging</strong>: Understand why specific chunks were filtered</li>
</ul>
<h2 id="chunk-debug-interface-new">Chunk Debug Interface (NEW)</h2>
<h3 id="features_1">Features</h3>
<ul>
<li><strong>Interactive Visualization</strong>: Click-to-highlight chunks</li>
<li><strong>Real-time Filtering</strong>: Multiple filter buttons for different chunk types</li>
<li><strong>Detailed Analysis</strong>: Feature breakdown and ML prediction details</li>
<li><strong>Feedback System</strong>: User feedback collection for model improvement</li>
</ul>
<h3 id="filter-options">Filter Options</h3>
<ul>
<li>Show All Chunks</li>
<li>Show Kept Only</li>
<li>Show Removed Only</li>
<li>Show Threat Keywords</li>
<li>Show Perfect Discriminators</li>
<li>Show ML Predictions</li>
<li><strong>Show ML Mismatches</strong> (NEW)</li>
</ul>
<h2 id="future-enhancements">Future Enhancements</h2>
<h3 id="planned-improvements">Planned Improvements</h3>
<ol>
<li><strong>Expand Training Data</strong></li>
<li>Collect more annotations</li>
<li>Include diverse content types</li>
<li>
<p>Improve model accuracy</p>
</li>
<li>
<p><strong>Advanced Features</strong></p>
</li>
<li>Dynamic chunk sizing</li>
<li>Context-aware filtering</li>
<li>
<p>Multi-language support</p>
</li>
<li>
<p><strong>Performance Optimization</strong></p>
</li>
<li>Caching of model predictions</li>
<li>Parallel chunk processing</li>
<li>
<p>GPU acceleration</p>
</li>
<li>
<p><strong>Analytics Dashboard</strong></p>
</li>
<li>Cost savings tracking</li>
<li>Filtering effectiveness metrics</li>
<li>User preference learning</li>
</ol>
<h3 id="contributing">Contributing</h3>
<ol>
<li><strong>Add New Patterns</strong></li>
<li>Update <code>pattern_rules</code> in <code>ContentFilter</code></li>
<li>Test with diverse content</li>
<li>
<p>Document pattern purpose</p>
</li>
<li>
<p><strong>Improve ML Model</strong></p>
</li>
<li>Add new features</li>
<li>Collect training data</li>
<li>
<p>Experiment with algorithms</p>
</li>
<li>
<p><strong>Enhance API</strong></p>
</li>
<li>Add new endpoints</li>
<li>Improve error handling</li>
<li>Add rate limiting</li>
</ol>
<h2 id="conclusion">Conclusion</h2>
<p>The GPT-4o Content Filtering System successfully reduces API costs by 20-80% while maintaining analysis quality. The hybrid approach combining pattern filters and machine learning provides both speed and accuracy, making it an effective solution for cost optimization in threat intelligence analysis.</p>
<p><strong>Key Benefits:</strong>
-  Significant cost savings (20-80%)
-  Preserves technical content quality
-  User-configurable filtering
-  Backward compatibility
-  Comprehensive logging and metrics</p>
<p><strong>Next Steps:</strong>
- Deploy to production environment
- Monitor cost savings and quality metrics
- Collect user feedback for improvements
- Expand training data for better accuracy</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["content.code.copy"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../js/stackedit.js"></script>
      
    
  </body>
</html>